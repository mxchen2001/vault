(this.webpackJsonpvault=this.webpackJsonpvault||[]).push([[0],{26:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),i=n(20),a=n.n(i),s=(n(26),n(3)),u=n(5),o=n.n(u),l=n(21),d=n(11),h=function e(t,n,r){Object(d.a)(this,e),this.name=t,this.type=n,this.parent=r,this.children=[]},f=function(){function e(t){Object(d.a)(this,e),this.root=new h(t,0,null),this.currentNode=this.root,this.path=this.root.name+"/"}return Object(l.a)(e,[{key:"setCurrent",value:function(e){this.currentNode=e}},{key:"getCurrentPath",value:function(){return this.path}},{key:"getNode",value:function(){return this.currentNode}},{key:"getChildren",value:function(){return this.currentNode.children.map((function(e){return e.name}))}},{key:"getFiles",value:function(){return this.currentNode.children.filter((function(e){return 1===e.type})).map((function(e){return e.name})).reduce((function(e,t){return e+" "+t}),"")}},{key:"getDirectories",value:function(){return this.currentNode.children.filter((function(e){return 0===e.type})).map((function(e){return e.name})).reduce((function(e,t){return e+" "+t}),"")}},{key:"existingDirectory",value:function(e){return void 0!==this.currentNode.children.find((function(t){return t.name===e&&0===t.type}))}},{key:"existingFile",value:function(e){return void 0!==this.currentNode.children.find((function(t){return t.name===e&&1===t.type}))}},{key:"getHref",value:function(e,t){return this.existingFile(t)?e+this.pwd()+"/"+t:null}},{key:"mkdir",value:function(e){this.currentNode.children.push(new h(e,0,this.currentNode))}},{key:"touch",value:function(e){this.existingFile(e)||this.currentNode.children.push(new h(e,1,this.currentNode))}},{key:"pwd",value:function(){for(var e="",t=this.currentNode;null!==t;)e=t.name+"/"+e,t=t.parent;return e}},{key:"cd",value:function(e){var t=this;e.split("/").forEach((function(e){if(".."!==e)if("~"!==e){var n=t.currentNode.children.find((function(t){return t.name===e&&0===t.type}));void 0!==n&&(t.currentNode=n)}else t.currentNode=t.root;else{if(null===t.currentNode.parent)return;t.currentNode=t.currentNode.parent}})),this.path=this.pwd()}}]),e}(),p=n(4),m=(n(45),n(0)),b=["Currently Working:"," - cd <path> - change directory"," - ls - list files"," - mkdir <dir> - create directory"," - touch <file> - create file"," - pwd - print working directory"," - help - show this message"," - open <file> - opens the contents of the file"," - man/less <file> - opens the contents of the in the terminal"," - about - Michael's Amazing Emulated SHell"],g="help-message",v="info-message",j="https://raw.githubusercontent.com/mxchen2001/mind-palace/";function y(e){var t=new Date,n=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds(),c=Object(r.useState)({width:window.innerWidth,height:window.innerHeight}),i=Object(s.a)(c,2),a=i[0],u=i[1],l=Object(r.useState)([{type:"default",message:"Current Login Time: "+n}]),d=Object(s.a)(l,2),h=d[0],f=d[1],y=Object(r.useState)([]),N=Object(s.a)(y,2),O=N[0],w=N[1],x=Object(r.useState)(O.length),k=Object(s.a)(x,2),E=k[0],S=k[1],M=e.dir,C=Object(r.useRef)(""),A=Object(r.useRef)(""),H=Object(r.useState)(!0),D=Object(s.a)(H,2),z=D[0],T=D[1];return Object(r.useEffect)((function(){var e=function(){u({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),Object(r.useEffect)((function(){var e=function(e){if("Tab"===e.key){var t=C.current.value.split(" "),n=t.length>0?t[t.length-1].split("/"):"",r=M.getNode();if(n.forEach((function(e,t){r&&t==n.length-1?r=r.children.find((function(t){return t.name.startsWith(e)})):r&&(r=r.children.find((function(t){return t.name===e&&0===t.type})))})),r&&r!==M.getNode()){var c=n.slice(0,-1).join("/"),i=c+(c.length>0?"/":"")+r.name+"/",a=t.length>1?t.slice(0,-1).join(" ")+" "+i:i;C.current.value=a}}else if("Enter"===e.key){S(O.length+1),w([].concat(Object(p.a)(O),[C.current.value]));var s=[].concat(Object(p.a)(h),[{className:"default",message:M.getCurrentPath()+" "+C.current.value+"\n"}]),u=C.current.value.split(" ")[0].toLowerCase(),l=C.current.value.split(" ");if("ls"===u)s.push({className:"dir-message",message:M.getDirectories()}),s.push({className:"file-message",message:M.getFiles()});else if("cd"===u)l.length>1&&M.cd(l[1]);else if("clear"===u)s=null,T(!0);else if("mkdir"===u)l.length>1&&M.mkdir(l[1]);else if("touch"===u)l.length>1&&M.touch(l[1]);else if("pwd"===u)s.push({className:"default",message:M.pwd()});else if("help"===u){var d;(d=s).push.apply(d,Object(p.a)(b.map((function(e){return{className:g,message:e+"\n"}}))))}else if("about"===u)s.push({className:g,message:"Michael's Amazing Emulated SHell"});else{if("man"===u||"less"===u){if(l.length>1){var m={url:M.getHref(j,l[1].replace("/","")),method:"GET"};o()(m).then((function(e){console.log(JSON.stringify(e.data));var t=e.data.split("\n").map((function(e){return{className:v,message:">"+e+" \n"}}));console.log(t),f([].concat(Object(p.a)(s),Object(p.a)(t))),C.current.value=""})).catch((function(e){console.log(e),f(Object(p.a)(s)),C.current.value=""}))}return}if("open"===u){if(l.length>1){var y=M.getHref(j,l[1].replace("/",""));y&&window.open(y,"_blank")}}else""===u&&z?(s.push({className:v,message:'type "help" for more information'}),T(!1)):""!==u&&s.push({className:"error-message",message:"command not found"})}f(s||[]),C.current.value="";var N=A.current.clientHeight,x=A.current.scrollHeight;N<x&&A.current.scrollTo(0,x)}else"ArrowUp"===e.key?E>0&&(C.current.value=O[E-1],S(E-1)):"ArrowDown"===e.key?E<O.length-1?(C.current.value=O[E+1],S(E+1)):(C.current.value="",S(O.length)):"ArrowLeft"!==e.key&&"ArrowRight"!==e.key&&S(O.length)};return C.current.addEventListener("keydown",e),function(){return C.current.removeEventListener("keydown",e)}}),[O,h,E,z]),Object(m.jsxs)("div",{className:"window",children:[Object(m.jsxs)("div",{className:"topbar",children:[Object(m.jsxs)("p",{className:"shellname",children:["MAESH ",a.width," x ",a.height]}),Object(m.jsx)("p",{className:"circle",style:{backgroundColor:"#ef6251"}}),Object(m.jsx)("p",{className:"circle",style:{backgroundColor:"#f6b73d"}}),Object(m.jsx)("p",{className:"circle",style:{backgroundColor:"#51bc45"}})]}),Object(m.jsxs)("div",{ref:A,onClick:function(){return document.getElementById("input-line").focus()},className:"textzone",children:[Object(m.jsx)("div",{className:"previous-line",children:h.map((function(e,t){return Object(m.jsx)("div",{className:e.className,children:e.message},t)}))}),Object(m.jsxs)("div",{className:"current-line",children:[Object(m.jsx)("div",{children:M.getCurrentPath()}),Object(m.jsx)("input",{id:"input-line",ref:C,className:"current-input",autoFocus:!0}),Object(m.jsx)("a",{tabIndex:"0",onFocus:function(){return document.getElementById("input-line").focus()}})]})]})]})}JSON.parse('{"sha":"af36688591b2c42da1512fe2c82552b759c8cdb3","url":"https://api.github.com/repos/mxchen2001/mind-palace/git/trees/af36688591b2c42da1512fe2c82552b759c8cdb3","tree":[{"path":"Music","mode":"040000","type":"tree","sha":"50fb3fd1e9bda0c0a0e21e440b88dee2eb7c706f","url":"https://api.github.com/repos/mxchen2001/mind-palace/git/trees/50fb3fd1e9bda0c0a0e21e440b88dee2eb7c706f"},{"path":"Music/README.md","mode":"100644","type":"blob","sha":"c211e81957de3f91cfa3e4060a168223398e71dc","size":44,"url":"https://api.github.com/repos/mxchen2001/mind-palace/git/blobs/c211e81957de3f91cfa3e4060a168223398e71dc"},{"path":"README.md","mode":"100644","type":"blob","sha":"7f4e58df5a2f25aed571aadaed8b5d0d03d5dede","size":47,"url":"https://api.github.com/repos/mxchen2001/mind-palace/git/blobs/7f4e58df5a2f25aed571aadaed8b5d0d03d5dede"},{"path":"STEM","mode":"040000","type":"tree","sha":"535748c23dd6b623fb78fb38180b300a7c662182","url":"https://api.github.com/repos/mxchen2001/mind-palace/git/trees/535748c23dd6b623fb78fb38180b300a7c662182"},{"path":"STEM/Computing","mode":"040000","type":"tree","sha":"b56ec94953488040b796f1baa1e05d86ea1b3982","url":"https://api.github.com/repos/mxchen2001/mind-palace/git/trees/b56ec94953488040b796f1baa1e05d86ea1b3982"},{"path":"STEM/Computing/README.md","mode":"100644","type":"blob","sha":"4943a841b2fb5f118f35f4468f01b289cf1950bf","size":44,"url":"https://api.github.com/repos/mxchen2001/mind-palace/git/blobs/4943a841b2fb5f118f35f4468f01b289cf1950bf"},{"path":"STEM/README.md","mode":"100644","type":"blob","sha":"31fdce5231d39d18da365c1abd70551f3fce2718","size":51,"url":"https://api.github.com/repos/mxchen2001/mind-palace/git/blobs/31fdce5231d39d18da365c1abd70551f3fce2718"}],"truncated":false}');var N=function(){var e=Object(r.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){if(null==n){o()({url:"https://api.github.com/repos/mxchen2001/mind-palace/git/trees/master?recursive=1",method:"GET"}).then((function(e){console.log("Github API request Success");var t=e.data.tree,n=new f("master");t.forEach((function(e){n.cd("~");var t=e.path.split("/");t.forEach((function(r,c){c!==t.length-1||"blob"!==e.type||n.existingFile(r)?n.existingDirectory(r)?n.cd(r):n.mkdir(r):n.touch(r)}))})),n.cd("~"),c(n)})).catch((function(e){console.log(e)}))}}),[]),Object(m.jsx)("div",{className:"App",children:n?Object(m.jsx)(y,{dir:n}):null})};a.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(N,{})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.e44b6553.chunk.js.map