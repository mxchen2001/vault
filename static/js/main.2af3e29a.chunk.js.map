{"version":3,"sources":["Directory.js","Terminal.js","Test.js","App.js","index.js"],"names":["Node","name","type","parent","this","children","Directory","root_name","root","currentNode","path","node","map","child","filter","reduce","acc","curr","lookupNode","find","undefined","baseURL","filepath","pathToken","pwd","split","current","filename","length","forEach","pathEl","existingFile","getDirectories","getFiles","directory_name","push","fileName","start","entirePath","HELP_MESSAGE","HELP_STYLE","INFO_STYLE","RAW_PATH","Terminal","props","today","Date","time","getHours","getMinutes","getSeconds","useState","width","window","innerWidth","height","innerHeight","dimensions","setDimensions","message","consoleOut","setConsoleOut","previousText","setPreviousText","previousTextPtr","setPreviousTextPtr","currentDirectory","dir","currentLine","useRef","terminalBody","showHelp","setShowHelp","useEffect","handleResize","addEventListener","removeEventListener","handleEnter","event","key","tokens","value","autocompleteToken","getNode","currentPathEl","index","startsWith","previousTokens","slice","join","completedToken","completedString","stdoutQueue","className","getCurrentPath","command","toLowerCase","args","ls","childDir","childFiles","cd","mkdir","touch","options","url","getHref","substring","method","axios","then","res","lines","data","line","catch","err","open","clientHeight","scrollHeight","scrollTo","style","backgroundColor","ref","onClick","document","getElementById","focus","item","id","autoFocus","autoComplete","tabIndex","onFocus","JSON","parse","App","filesys","setFilesys","console","log","tree","master","subPath","existingDirectory","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.2af3e29a.chunk.js","sourcesContent":["const DIRECTORY_TYPE = 0;\nconst FILE_TYPE = 1;\n\nclass Node {\n    constructor(name, type, parent) {\n        this.name = name;\n        this.type = type;\n        this.parent = parent;\n        this.children = [];\n    }\n}\n\n\nexport default class Directory {\n    constructor(root_name) {\n        this.root = new Node(root_name, DIRECTORY_TYPE, null);\n        this.currentNode = this.root;\n        this.path = this.root.name + '/';\n    }\n\n    setCurrent(node) {\n        this.currentNode = node;\n    }\n\n    getCurrentPath() {\n        return this.path;\n    }\n\n    getNode() {\n        return this.currentNode;\n    }\n\n    getChildren() {\n        return this.currentNode.children.map(child => child.name);\n    }\n\n    getFiles(node = this.currentNode) {\n        if (node) {\n            return node.children.filter(child => child.type === FILE_TYPE).map(child => child.name).reduce((acc, curr) => acc + ' ' + curr, '');\n        }\n        return null;\n    }\n\n    getDirectories(node = this.currentNode) {\n        if (node) {\n            return node.children.filter(child => child.type === DIRECTORY_TYPE).map(child => child.name).reduce((acc, curr) => acc + ' ' + curr, '');\n        }\n        return null;\n    }\n\n    existingDirectory(path, lookupNode = this.currentNode) {\n        const node = lookupNode.children.find(child => child.name === path && child.type === DIRECTORY_TYPE);\n        return node !== undefined;\n    }\n\n    existingFile(path, lookupNode = this.currentNode) {\n        const node = lookupNode.children.find(child => child.name === path && child.type === FILE_TYPE);\n        return node !== undefined;\n    }\n\n    getHref(baseURL, filepath) {\n        const pathToken = (this.pwd() + '/' + filepath).split('/');\n        let current = this.currentNode;\n        const filename = pathToken[pathToken.length - 1];\n        pathToken.forEach((pathEl) => {\n            if (pathEl === \"..\") {\n                if (current.parent === null) {\n                    return;\n                }\n                current = current.parent;\n                return;\n            }\n\n            if (pathEl === \"~\") {\n                current = this.root;\n                return;\n            }\n\n            const node = current.children.find(child => child.name === pathEl && child.type === DIRECTORY_TYPE);\n            if (node === undefined) {\n                return;\n            }\n            current = node;\n        });\n        return this.existingFile(filename, current) ? baseURL + this.pwd() + '/' + filepath : null;\n    }\n\n    ls(path) {\n        let current = this.currentNode;\n        path.split('/').forEach((pathEl) => {\n            if (pathEl === \"..\") {\n                if (current.parent === null) {\n                    return;\n                }\n                current = current.parent;\n                return;\n            }\n\n            if (pathEl === \"~\") {\n                current = this.root;\n                return;\n            }\n\n            const node = current.children.find(child => child.name === pathEl && child.type === DIRECTORY_TYPE);\n            if (node === undefined) {\n                return;\n            }\n            current = node;\n        });\n        return [this.getDirectories(current), this.getFiles(current)];\n    }\n\n    mkdir(directory_name) {\n        this.currentNode.children.push(new Node(directory_name, DIRECTORY_TYPE, this.currentNode));\n    }\n\n    touch(fileName) {\n        if (!this.existingFile(fileName)) {\n            this.currentNode.children.push(new Node(fileName, FILE_TYPE, this.currentNode));\n        }\n    }\n\n    pwd(start = this.currentNode) {\n        let entirePath = ''\n        let current = start;\n        while (current !== null) {\n            entirePath = current.name + '/' + entirePath;\n            current = current.parent;\n        }\n        return entirePath;\n    }\n\n    cd(path) {\n        path.split('/').forEach((pathEl) => {\n            if (pathEl === \"..\") {\n                if (this.currentNode.parent === null) {\n                    return;\n                }\n                this.currentNode = this.currentNode.parent;\n                return;\n            }\n\n            if (pathEl === \"~\") {\n                this.currentNode = this.root;\n                return;\n            }\n\n            const node = this.currentNode.children.find(child => child.name === pathEl && child.type === DIRECTORY_TYPE);\n            if (node === undefined) {\n                return;\n            }\n            this.currentNode = node;\n        });\n        this.path = this.pwd();\n    }\n}\n\n","import './Terminal.css';\nimport { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\n\nconst HELP_MESSAGE = [\n  'Currently Working:',\n  ' - cd <path> - change directory',\n  ' - ls - list files',\n  ' - mkdir <dir> - create directory',\n  ' - touch <file> - create file',\n  ' - pwd - print working directory',\n  ' - help - show this message',\n  ' - open <file> - opens the contents of the file',\n  ' - man/less <file> - opens the contents of the in the terminal',\n  ' - about - Michael\\'s Amazing Emulated SHell'\n];\n\nconst HELP_STYLE = 'help-message';\nconst INFO_STYLE = 'info-message';\nconst ERROR_STYLE = 'error-message';\nconst DIRECTORY_STYLE = 'dir-message';\nconst FILE_STYLE = 'file-message';\n\nconst RAW_PATH = \"https://raw.githubusercontent.com/mxchen2001/mind-palace/\"\n\nexport default function Terminal(props) {\n  const today = new Date();\n  const time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n\n  const [dimensions, setDimensions] = useState({ width: window.innerWidth, height: window.innerHeight });\n  const [consoleOut, setConsoleOut] = useState([\n    {\n      type: 'default',\n      message: 'Current Login Time: ' + time,\n    }\n  ]);\n\n  const [previousText, setPreviousText] = useState([]);\n  const [previousTextPtr, setPreviousTextPtr] = useState(previousText.length);\n\n  const currentDirectory = props.dir;\n\n  const currentLine = useRef('');\n  const terminalBody = useRef('');\n\n  const [showHelp, setShowHelp] = useState(true);\n\n\n  useEffect(() => {\n    const handleResize = () => {\n      setDimensions({ width: window.innerWidth, height: window.innerHeight });\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  useEffect(() => {\n    const handleEnter = (event) => {\n      switch (event.key) {\n        case ('Tab'): {\n          const tokens = currentLine.current.value.split(' ');\n          const autocompleteToken = tokens.length > 0 ? tokens[tokens.length - 1].split('/') : '';\n          let currentNode = currentDirectory.getNode();\n          let currentPathEl = '';\n          autocompleteToken.forEach((pathEl, index) => {\n            if (currentNode && index == autocompleteToken.length - 1) {\n              if (pathEl.startsWith('.')) {\n                currentNode = currentNode.parent;\n                currentPathEl = '..'\n              } else {\n                currentNode = currentNode.children.find(child => child.name.startsWith(pathEl));\n                currentPathEl = currentNode ? currentNode.name : '';\n              }\n            } else if (currentNode) {\n              if (pathEl == '..') {\n                currentNode = currentNode.parent;\n              } else if (pathEl !== '.') {\n                currentNode = currentNode.children.find(child => child.name === pathEl && child.type === 0);\n              }\n            }\n          });\n  \n          if (currentNode) {\n            const previousTokens = autocompleteToken.slice(0, -1).join('/')\n            const completedToken = previousTokens + (previousTokens.length > 0 ? '/' : '') + currentPathEl + '/';\n            const completedString = tokens.length > 1 ? tokens.slice(0, -1).join(' ') + ' ' + completedToken : completedToken;\n            currentLine.current.value = completedString\n          }\n          break;\n        } case ('Enter'): {\n          setPreviousTextPtr(previousText.length + 1);\n          setPreviousText([...previousText, currentLine.current.value]);\n  \n          //////////////////////////////////////////////////////////////////////////////\n          // TODO: Functionize this, later\n  \n          let stdoutQueue = [...consoleOut,\n            {\n              className: 'default',\n              message: currentDirectory.getCurrentPath() + ' ' + currentLine.current.value + '\\n'\n            }\n          ];\n  \n          const command = currentLine.current.value.split(' ')[0].toLowerCase();\n          const args = currentLine.current.value.split(' ');\n  \n          switch (command) {\n            case ('ls'): {\n              const [childDir, childFiles] = currentDirectory.ls(args.length > 1 ? args[1] : '');\n              stdoutQueue.push({\n                className: DIRECTORY_STYLE,\n                message: childDir\n              });\n              stdoutQueue.push({\n                className: FILE_STYLE,\n                message: childFiles\n              });\n              break;\n            } case ('cd'): {\n              if (args.length > 1) {\n                currentDirectory.cd(args[1]);\n              }\n              break;\n            } case ('clear'): {\n              stdoutQueue = null;\n              setShowHelp(true);\n              break;\n            } case ('mkdir'): {\n              if (args.length > 1) {\n                currentDirectory.mkdir(args[1]);\n              }\n              break;\n            } case ('touch'): {\n              if (args.length > 1) {\n                currentDirectory.touch(args[1]);\n              }\n              break;\n            } case ('pwd'): {\n              stdoutQueue.push({\n                className: 'default',\n                message: currentDirectory.pwd()\n              });\n              break;\n            } case ('help'): {\n              stdoutQueue.push(...HELP_MESSAGE.map(message => {\n                return {\n                  className: HELP_STYLE,\n                  message: message + '\\n'\n                }\n              }));\n              break;\n            } case ('about'): {\n              stdoutQueue.push({\n                className: HELP_STYLE,\n                message: 'Michael\\'s Amazing Emulated SHell'\n              });\n  \n              break;\n            } case ('less'):\n              case ('man'): {\n              if (args.length > 1) {\n                const url = currentDirectory.getHref(RAW_PATH, (args[1][args[1].length - 1] === '/' ? args[1].substring(0, args[1].length - 1) : args[1]));\n                const options = {\n                  url: url,\n                  method: 'GET',\n                };\n                axios(options).then(res => {\n                  // retain whitespace\n                  const lines = res.data.split('\\n').map(line => {\n                    return {\n                      className: INFO_STYLE,\n                      message: '>' + line + ' \\n'\n                    }\n                  });\n                  setConsoleOut([...stdoutQueue, ...lines]);\n                  currentLine.current.value = '';\n                }).catch(err => {\n                  // console.log(err);\n                  setConsoleOut([...stdoutQueue]);\n                  currentLine.current.value = '';\n                })\n              }\n              return;\n            } case ('open'): {\n              if (args.length > 1) {\n                const url = currentDirectory.getHref(RAW_PATH, (args[1][args[1].length - 1] === '/' ? args[1].substring(0, args[1].length - 1) : args[1]));\n                if (url) {\n                  window.open(url, \"_blank\")\n                }\n              }\n              break;\n            } case (''): {\n              if (showHelp) {\n                stdoutQueue.push({\n                  className: INFO_STYLE,\n                  message: 'type \"help\" for more information'\n                });\n                setShowHelp(false);\n              }\n              break;\n            } default: {\n              stdoutQueue.push({\n                className: ERROR_STYLE,\n                message: 'command not found'\n              });\n            }\n          }\n          //////////////////////////////////////////////////////////////////////////////\n  \n  \n  \n          setConsoleOut(stdoutQueue ? stdoutQueue : [{\n            type: 'default',\n            message: 'Most Recent Clear Time: ' + time,\n          }]);\n  \n          currentLine.current.value = '';\n          const clientHeight = terminalBody.current.clientHeight;\n          const scrollHeight = terminalBody.current.scrollHeight;\n  \n          if (clientHeight < scrollHeight) {\n            terminalBody.current.scrollTo(0, scrollHeight);\n          }\n          break;\n        } case ('ArrowUp'): {\n          if (previousTextPtr > 0) {\n            currentLine.current.value = previousText[previousTextPtr - 1];\n            setPreviousTextPtr(previousTextPtr - 1);\n          }\n          break;\n        } case ('ArrowDown'): {\n          if (previousTextPtr < previousText.length - 1) {\n            currentLine.current.value = previousText[previousTextPtr + 1];\n            setPreviousTextPtr(previousTextPtr + 1);\n          } else {\n            currentLine.current.value = '';\n            setPreviousTextPtr(previousText.length);\n          }\n          break;\n        } default: { \n          if (event.key !== 'ArrowLeft' && event.key !== 'ArrowRight') {\n            setPreviousTextPtr(previousText.length);\n          }\n          break;\n        }\n      }\n    };\n\n    currentLine.current.addEventListener(\"keydown\", handleEnter);\n    return () => currentLine.current.removeEventListener('keydown', handleEnter);\n  }, [previousText, consoleOut, previousTextPtr, showHelp]);\n\n  return (\n    <div className=\"window\">\n      <div className=\"topbar\">\n        <p className=\"circle\" style={{ backgroundColor: '#ef6251' }} />\n        <p className=\"circle\" style={{ backgroundColor: '#f6b73d' }} />\n        <p className=\"circle\" style={{ backgroundColor: '#51bc45' }} />\n        <p className=\"shellname\">MAESH {dimensions.width} x {dimensions.height}</p>\n      </div>\n      <div ref={terminalBody} onClick={() => document.getElementById(\"input-line\").focus()} className=\"textzone\">\n        <div className=\"previous-line\">\n          {consoleOut.map((item, index) => {\n            return (\n              <div className={item.className} key={index}>{item.message}</div>\n            )\n          })}\n        </div>\n        <div className=\"current-line\">\n          <div>{currentDirectory.getCurrentPath()}</div>\n          <input id=\"input-line\" ref={currentLine} className=\"current-input\" autoFocus autoComplete=\"off\"/>\n          <a tabIndex=\"0\" onFocus={() => document.getElementById(\"input-line\").focus()} />\n        </div>\n      </div>\n    </div>\n  );\n}","import { useState, useEffect, useRef } from 'react';\nimport Directory from './Directory'\nimport axios from 'axios'\n\nconst DUMMY = JSON.parse('{\"sha\":\"af36688591b2c42da1512fe2c82552b759c8cdb3\",\"url\":\"https://api.github.com/repos/mxchen2001/mind-palace/git/trees/af36688591b2c42da1512fe2c82552b759c8cdb3\",\"tree\":[{\"path\":\"Music\",\"mode\":\"040000\",\"type\":\"tree\",\"sha\":\"50fb3fd1e9bda0c0a0e21e440b88dee2eb7c706f\",\"url\":\"https://api.github.com/repos/mxchen2001/mind-palace/git/trees/50fb3fd1e9bda0c0a0e21e440b88dee2eb7c706f\"},{\"path\":\"Music/README.md\",\"mode\":\"100644\",\"type\":\"blob\",\"sha\":\"c211e81957de3f91cfa3e4060a168223398e71dc\",\"size\":44,\"url\":\"https://api.github.com/repos/mxchen2001/mind-palace/git/blobs/c211e81957de3f91cfa3e4060a168223398e71dc\"},{\"path\":\"README.md\",\"mode\":\"100644\",\"type\":\"blob\",\"sha\":\"7f4e58df5a2f25aed571aadaed8b5d0d03d5dede\",\"size\":47,\"url\":\"https://api.github.com/repos/mxchen2001/mind-palace/git/blobs/7f4e58df5a2f25aed571aadaed8b5d0d03d5dede\"},{\"path\":\"STEM\",\"mode\":\"040000\",\"type\":\"tree\",\"sha\":\"535748c23dd6b623fb78fb38180b300a7c662182\",\"url\":\"https://api.github.com/repos/mxchen2001/mind-palace/git/trees/535748c23dd6b623fb78fb38180b300a7c662182\"},{\"path\":\"STEM/Computing\",\"mode\":\"040000\",\"type\":\"tree\",\"sha\":\"b56ec94953488040b796f1baa1e05d86ea1b3982\",\"url\":\"https://api.github.com/repos/mxchen2001/mind-palace/git/trees/b56ec94953488040b796f1baa1e05d86ea1b3982\"},{\"path\":\"STEM/Computing/README.md\",\"mode\":\"100644\",\"type\":\"blob\",\"sha\":\"4943a841b2fb5f118f35f4468f01b289cf1950bf\",\"size\":44,\"url\":\"https://api.github.com/repos/mxchen2001/mind-palace/git/blobs/4943a841b2fb5f118f35f4468f01b289cf1950bf\"},{\"path\":\"STEM/README.md\",\"mode\":\"100644\",\"type\":\"blob\",\"sha\":\"31fdce5231d39d18da365c1abd70551f3fce2718\",\"size\":51,\"url\":\"https://api.github.com/repos/mxchen2001/mind-palace/git/blobs/31fdce5231d39d18da365c1abd70551f3fce2718\"}],\"truncated\":false}')\n\nconst RAW_PATH = \"https://raw.githubusercontent.com/mxchen2001/mind-palace/\"\n\nexport default function Test() {\n\n    const [dummyDir, setDummyDir] = useState(new Directory('master'))\n    const [href, setHref] = useState('')\n\n    return (\n        <div>\n            <button \n            style={{\n                width: '100%',\n                height: '50vh',\n            }}\n\n            onClick={() => {\n                console.log(\"Testing Github API\");\n                // make an api request to google.com\n\n                // const options = {\n                //     url: 'https://raw.githubusercontent.com/facebook/react/master/README.md',\n                //     method: 'GET',\n                //   };\n\n                // const options = {\n                //     url: 'https://api.github.com/repos/mxchen2001/mind-palace/git/trees/master?recursive=1',\n                //     method: 'GET',\n                //   };\n                // axios(options).then(res => {\n                //     console.log(JSON.stringify(res.data));\n                // }).catch(err => {\n                //     console.log(err);\n                // })\n\n                console.log(DUMMY);\n                console.log(DUMMY.tree);\n\n                const tree = DUMMY.tree;\n\n                tree.forEach(item => { \n                    dummyDir.cd('~')\n                    const path = item.path.split('/');             \n                    path.forEach((subPath, index) => {\n                        if (index === path.length - 1 && item.type === 'blob') {\n                            dummyDir.touch(subPath);\n                            return;\n                        }\n\n                        if (dummyDir.existingDirectory(subPath)) {\n                            dummyDir.cd(subPath);\n                        } else {\n                            console.log('creating new subdirectory');\n                            dummyDir.mkdir(subPath);\n                        }\n                    })\n                })\n\n                // console.log(dummyDir.getChildren());\n                setHref(dummyDir.getHref(RAW_PATH, 'README.md'));\n\n\n\n                console.log(dummyDir);\n\n\n            }}>TEST</button>\n            <a href={href} target=\"_blank\" rel=\"noopener noreferrer\">OPEN RAW </a>\n\n        </div>\n    )\n}","import axios from 'axios';\nimport { useState, useEffect } from 'react';\nimport Directory from './Directory';\nimport Terminal from './Terminal';\nimport Test from './Test';\n\nfunction App() {\n\n  const [filesys, setFilesys] = useState(null);\n\n  useEffect(() => {\n    if (filesys != null) {\n      return;\n    }\n\n    const options = {\n      url: 'https://api.github.com/repos/mxchen2001/mind-palace/git/trees/master?recursive=1',\n      method: 'GET',\n    };\n    axios(options).then(res => {\n        console.log('Github API request Success');\n        const tree = res.data.tree;\n        const master = new Directory('master');\n        tree.forEach(item => { \n          master.cd('~')\n            const path = item.path.split('/');             \n            path.forEach((subPath, index) => {\n                if (index === path.length - 1 && item.type === 'blob' && !master.existingFile(subPath)) {\n                  master.touch(subPath);\n                } else {\n                  if (master.existingDirectory(subPath)) {\n                    master.cd(subPath);\n                  } else {\n                    master.mkdir(subPath);\n                  }\n                }\n            })\n        })\n    \n        master.cd('~');\n        setFilesys(master); \n    }).catch(err => {\n        console.log(err);\n    })\n\n  }, []);\n\n  return (\n    <div className=\"App\">\n      {filesys ? <Terminal dir={filesys} /> : null}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}